<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Вход / Регистрация</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: 'Montserrat', Arial, sans-serif;
            background: #f7f7f7;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .auth-container {
            background: #fff;
            border-radius: 16px;
            box-shadow: 0 2px 16px rgba(20,58,90,0.12);
            padding: 32px 28px 24px 28px;
            width: 340px;
            max-width: 90vw;
            text-align: center;
        }
        .switch-btns {
            display: flex;
            justify-content: center;
            margin-bottom: 24px;
            gap: 12px;
        }
        .switch-btn {
            flex: 1;
            padding: 10px 0;
            border: none;
            border-radius: 8px;
            background: #ffe08a;
            color: #143a5a;
            font-weight: 700;
            font-size: 1em;
            cursor: pointer;
            transition: background 0.2s;
        }
        .switch-btn.active, .switch-btn:hover {
            background: #ffd700;
        }
        .auth-form {
            display: none;
            flex-direction: column;
            gap: 16px;
        }
        .auth-form.active {
            display: flex;
        }
        .auth-form input {
            padding: 10px;
            border-radius: 6px;
            border: 1px solid #d0d0d0;
            font-size: 1em;
        }
        .auth-form button {
            background: #143a5a;
            color: #ffe08a;
            border: none;
            border-radius: 8px;
            padding: 10px 0;
            font-size: 1em;
            font-weight: 700;
            cursor: pointer;
            transition: background 0.2s;
        }
        .auth-form button:hover {
            background: #ffe08a;
            color: #143a5a;
        }
        .auth-title {
            font-size: 1.5em;
            font-weight: 700;
            color: #143a5a;
            margin-bottom: 18px;
        }
        .auth-message {
            color: #d90000;
            font-size: 1em;
            margin-bottom: 8px;
            min-height: 20px;
        }
        .auth-message.success {
            color: #1a7f1a;
        }
    </style>
</head>
<body>
    <div class="auth-container">
        <div class="switch-btns">
            <button class="switch-btn active" id="loginTab">Вход</button>
            <button class="switch-btn" id="registerTab">Регистрация</button>
        </div>
        <form class="auth-form active" id="loginForm" autocomplete="off">
            <div class="auth-title">Вход</div>
            <div class="auth-message" id="loginMessage"></div>
            <input type="email" id="loginEmail" placeholder="Email" required>
            <input type="password" id="loginPassword" placeholder="Пароль" required>
            <button type="button" id="loginBtn">Войти</button>
        </form>
        <form class="auth-form" id="registerForm" autocomplete="off">
            <div class="auth-title">Регистрация</div>
            <div class="auth-message" id="registerMessage"></div>
            <input type="email" id="registerEmail" placeholder="Email" required>
            <input type="password" id="registerPassword" placeholder="Пароль" required>
            <button type="button" id="registerBtn">Зарегистрироваться</button>
        </form>
    </div>
    <!-- Firebase App (core SDK) -->
<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
<!-- Firebase Auth SDK -->
<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-auth-compat.js"></script>
<script>
  // TODO: Замените на свои параметры конфигурации из Firebase Console
  const firebaseConfig = {
    apiKey: "AIzaSyAnDLe2RXvIdZBSE6cYrcq_3ENRQqVyMjY",
    authDomain: "goshack-4b984.firebaseapp.com",
    projectId: "goshack-4b984",
    storageBucket: "goshack-4b984.firebasestorage.app",
    messagingSenderId: "672350768641",
    appId: "1:672350768641:web:df83b4c4a64b3129cefa00",
    measurementId: "G-VZ0M6Z26ZQ"
};
  firebase.initializeApp(firebaseConfig);
</script>
<script>
    // Переключение вкладок
    const loginTab = document.getElementById('loginTab');
    const registerTab = document.getElementById('registerTab');
    const loginForm = document.getElementById('loginForm');
    const registerForm = document.getElementById('registerForm');

    loginTab.onclick = function() {
        loginTab.classList.add('active');
        registerTab.classList.remove('active');
        loginForm.classList.add('active');
        registerForm.classList.remove('active');
    };
    registerTab.onclick = function() {
        registerTab.classList.add('active');
        loginTab.classList.remove('active');
        registerForm.classList.add('active');
        loginForm.classList.remove('active');
    };

    const registerBtn = document.getElementById('registerBtn');
    const loginBtn = document.getElementById('loginBtn');
    const registerMessage = document.getElementById('registerMessage');
    const loginMessage = document.getElementById('loginMessage');

    // Регистрация через Firebase
    registerBtn.onclick = async function() {
        registerMessage.textContent = '';
        registerMessage.classList.remove('success');
        const email = document.getElementById('registerEmail').value.trim().toLowerCase();
        const password = document.getElementById('registerPassword').value;

        if (!email || !password) {
            registerMessage.textContent = 'Пожалуйста, заполните все поля.';
            return;
        }
        if (password.length < 4) {
            registerMessage.textContent = 'Пароль должен быть не менее 4 символов.';
            return;
        }

        try {
            await firebase.auth().createUserWithEmailAndPassword(email, password);
            window.location.href = "profile.html";
        } catch (e) {
            if (e.code === 'auth/email-already-in-use') {
                registerMessage.textContent = 'Пользователь с таким email уже существует.';
            } else if (e.code === 'auth/invalid-email') {
                registerMessage.textContent = 'Некорректный email.';
            } else {
                registerMessage.textContent = 'Ошибка регистрации: ' + e.message;
            }
        }
    };

    // Вход через Firebase
    loginBtn.onclick = async function() {
        loginMessage.textContent = '';
        loginMessage.classList.remove('success');
        const email = document.getElementById('loginEmail').value.trim();
        const password = document.getElementById('loginPassword').value;
        if (!email || !password) {
            loginMessage.textContent = 'Пожалуйста, заполните все поля.';
            return;
        }
        try {
            await firebase.auth().signInWithEmailAndPassword(email, password);
            window.location.href = "profile.html";
        } catch (e) {
            if (e.code === 'auth/user-not-found' || e.code === 'auth/wrong-password') {
                loginMessage.textContent = 'Неверный email или пароль.';
            } else if (e.code === 'auth/invalid-email') {
                loginMessage.textContent = 'Некорректный email.';
            } else {
                loginMessage.textContent = 'Ошибка входа: ' + e.message;
            }
        }
    };
</script>
</body>
</html>